# =============================================================================
# Slack Configuration
# =============================================================================
SLACK_BOT_TOKEN=xoxb-your-bot-token-here
SLACK_APP_TOKEN=xapp-your-app-token-here
SLACK_BOT_ID=B12345678

# =============================================================================
# Metric.ai API
# =============================================================================
METRIC_API_KEY=your-metric-api-key-here

# =============================================================================
# Portal API (8th Light Employee Portal)
# =============================================================================
PORTAL_SECRET=your-portal-jwt-secret-here
PORTAL_URL=https://api.portal.8thlight.com
PORTAL_EMAIL=bot@8thlight.com

# =============================================================================
# LLM Provider Configuration
# =============================================================================
LLM_API_URL=https://api.openai.com/v1
LLM_API_KEY=sk-your-openai-api-key-here
LLM_MODEL=gpt-4o
LLM_MAX_TOKENS=4096
LLM_TEMPERATURE=0.68

# =============================================================================
# RAG Configuration
# =============================================================================
RAG_QUERY_REWRITE_MODEL=gpt-4o-mini
RAG_ENABLE_QUERY_REWRITING=true
RAG_ENABLE_CONTEXTUAL_RETRIEVAL=true
RAG_MAX_CHUNKS=25
RAG_MAX_RESULTS=10
RAG_SIMILARITY_THRESHOLD=0.3
RAG_RESULTS_SIMILARITY_THRESHOLD=0.5
RAG_MAX_CHUNKS_PER_DOCUMENT=3
RAG_ENTITY_CONTENT_BOOST=0.05
RAG_ENTITY_TITLE_BOOST=0.1

# =============================================================================
# Cache Configuration (Redis)
# =============================================================================
CACHE_REDIS_URL=redis://localhost:6379
CACHE_CONVERSATION_TTL=1800
CACHE_ENABLED=true

# =============================================================================
# MinIO S3-Compatible Storage (Research File Caching)
# =============================================================================
MINIO_ENDPOINT=http://minio:9000
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=minioadmin

# =============================================================================
# Conversation Management
# =============================================================================
CONVERSATION_MAX_MESSAGES=50
CONVERSATION_SUMMARIZE_THRESHOLD=30
CONVERSATION_KEEP_RECENT=10
CONVERSATION_MODEL_CONTEXT_WINDOW=128000

# =============================================================================
# Application Settings
# =============================================================================
ENVIRONMENT=development
LOG_LEVEL=INFO
HEALTH_PORT=8080
TASKS_PORT=5001

# =============================================================================
# Database Configuration
# =============================================================================
# MySQL Root and Service Account Passwords
# SECURITY CRITICAL: Change these in production!
# Generate strong passwords: openssl rand -base64 32
MYSQL_ROOT_PASSWORD=changeme_root_password
MYSQL_TASKS_PASSWORD=changeme_tasks_password
MYSQL_DATA_PASSWORD=changeme_data_password
MYSQL_SECURITY_PASSWORD=changeme_security_password
MYSQL_SYSTEM_PASSWORD=changeme_system_password

# Database Connection URLs (passwords injected from variables above)
# NOTE: Database credentials removed from defaults for security
# You MUST set these environment variables explicitly
DATA_DATABASE_URL=mysql+pymysql://username:password@localhost:3306/insightmesh_data
TASK_DATABASE_URL=mysql+pymysql://username:password@localhost:3306/insightmesh_task
SECURITY_DATABASE_URL=mysql+pymysql://username:password@localhost:3306/insightmesh_security
SYSTEM_DATABASE_URL=mysql+pymysql://username:password@localhost:3306/insightmesh_system

# =============================================================================
# Monitoring (Prometheus & Grafana)
# =============================================================================
PROMETHEUS_PORT=9090
GRAFANA_PORT=3000

# =============================================================================
# Vector Database Configuration (Qdrant)
# =============================================================================
VECTOR_PROVIDER=qdrant
VECTOR_HOST=localhost
VECTOR_PORT=6333
VECTOR_API_KEY=your-qdrant-api-key-here
VECTOR_COLLECTION_NAME=insightmesh-knowledge-base

# =============================================================================
# Embedding Configuration
# =============================================================================
EMBEDDING_PROVIDER=openai
EMBEDDING_MODEL=text-embedding-3-large
EMBEDDING_API_KEY=sk-your-openai-api-key-here

# =============================================================================
# Observability
# =============================================================================
# Langfuse (for task observability)
LANGFUSE_ENABLED=true
LANGFUSE_PUBLIC_KEY=pk-lf-your-public-key-here
LANGFUSE_SECRET_KEY=sk-lf-your-secret-key-here
LANGFUSE_HOST=https://us.cloud.langfuse.com
LANGFUSE_DEBUG=false
LANGFUSE_USE_PROMPT_TEMPLATES=true
LANGFUSE_SYSTEM_PROMPT_TEMPLATE=System/Default

# Langsmith (for agent observability)
LANGSMITH_API_KEY=lsv2_pt_your-langsmith-api-key-here

# =============================================================================
# Web Search Configuration
# =============================================================================
TAVILY_API_KEY=tvly-your-tavily-api-key-here
PERPLEXITY_API_KEY=pplx-your-perplexity-api-key-here
PERPLEXITY_ENABLED=true

# =============================================================================
# Google Services
# =============================================================================
# Google OAuth (for Drive ingestion)
GOOGLE_OAUTH_CLIENT_ID=your-client-id.apps.googleusercontent.com
GOOGLE_OAUTH_CLIENT_SECRET=your-client-secret-here

# OAuth Base URLs (for Google OAuth redirects - see OAuth Base URLs section below)
# Local development: http://localhost:5001 (default)
# Remote server: http://your-ec2-dns.compute.amazonaws.com:5001
# IMPORTANT: Must match the redirect URI registered in Google Cloud Console

# OAuth Token Encryption (REQUIRED for production)
# Generate with: python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
OAUTH_ENCRYPTION_KEY=your-fernet-encryption-key-here

# Gemini AI (optional)
GEMINI_ENABLED=false
GEMINI_API_KEY=your-gemini-api-key-here
GEMINI_MODEL=gemini-2.5-pro

# Google Workspace Admin SDK (for user sync)
# Service account for accessing Google Workspace Admin Directory API
# Create at: https://console.cloud.google.com/iam-admin/serviceaccounts
# Download JSON key and set path here
GOOGLE_SERVICE_ACCOUNT_FILE=/path/to/service-account-key.json
# Admin email for delegated access (required for Admin SDK)
GOOGLE_ADMIN_EMAIL=admin@yourdomain.com

# =============================================================================
# Advanced Configuration
# =============================================================================
# gRPC debugging (usually not needed)
GRPC_TRACE=
GRPC_VERBOSITY=

# PDF styling
PDF_STYLE=default

# =============================================================================
# Configuration Examples
# =============================================================================
# For local development:
#   - Use localhost for VECTOR_HOST, CACHE_REDIS_URL
#   - Docker Compose will override these for containers
#
# For production:
#   - Set all credentials via environment variables
#   - Never use default/example values
#   - Enable TLS/SSL for all external connections
SECRET_KEY=dev-secret-change-in-prod-20e7fcf8c8e5ad0654a6557c475630ce

# Control Plane
CONTROL_PLANE_PORT=6001
ALLOWED_EMAIL_DOMAIN=@8thlight.com

# =============================================================================
# LibreChat Configuration (ChatGPT Alternative UI)
# =============================================================================
LIBRECHAT_PORT=3080
LIBRECHAT_DOMAIN_CLIENT=http://localhost:3080
LIBRECHAT_DOMAIN_SERVER=http://localhost:3080

# JWT Secrets for LibreChat sessions
# Generate: openssl rand -base64 32
JWT_SECRET_KEY=changeme-jwt-secret-key-for-librechat
JWT_REFRESH_SECRET_KEY=changeme-jwt-refresh-secret-key

# =============================================================================
# OAuth Base URLs (for Google OAuth redirects)
# =============================================================================
# These URLs must match the redirect URIs registered in Google Cloud Console
CONTROL_PLANE_BASE_URL=http://localhost:6001
SERVER_BASE_URL=http://localhost:5001
DASHBOARD_BASE_URL=http://localhost:8080

# ========================================
# Agent Execution Mode Configuration
# ========================================
# Controls where agents execute (embedded or cloud)
# - embedded: Agents run locally in agent-service container (default, current behavior)
# - cloud: Agents run on LangGraph Cloud (requires LangGraph Platform credentials)
AGENT_EXECUTION_MODE=embedded

# LangGraph Cloud Configuration (only required if AGENT_EXECUTION_MODE=cloud)
# Get credentials from: https://langchain-ai.github.io/langgraph/cloud/
# Example values:
# LANGGRAPH_CLOUD_URL=https://your-deployment.langraph.api
# LANGGRAPH_API_KEY=lsv2_pt_abc123...
LANGGRAPH_CLOUD_URL=
LANGGRAPH_API_KEY=

# Agent Loading Configuration
# Set to false if external agents are deployed to LangGraph Cloud
LOAD_EXTERNAL_AGENTS=true

# RAG Service
RAG_SERVICE_TOKEN=changeme_rag_service_token
RAG_SERVICE_URL=http://rag_service:8002
RAG_SERVICE_PORT=8002
